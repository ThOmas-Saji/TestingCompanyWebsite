echo "ğŸ” Checking Node.js version compatibility..."
node .husky/node-version-check.cjs

echo "ğŸ”’ Running security checks..."
node .husky/security-check.cjs

echo "ğŸŒ¿ Validating branch configuration..."
node .husky/branch-check.cjs

echo "ğŸ“ Checking branch naming conventions..."
node .husky/branch-name-check.cjs

echo "âœ¨ Checking code formatting with Prettier..."
if ! npm run format:check; then
  redBold='\x1b[1;31m'
  yellowBold='\x1b[1;33m'
  cyanBold='\x1b[1;36m'
  reset='\x1b[0m'
  bgRed='\x1b[41m'
  whiteBold='\x1b[1;37m'

  echo ""
  echo -e "${bgRed}${whiteBold}                                                      ${reset}"
  echo -e "${bgRed}${whiteBold}      ğŸ¨ COMMIT BLOCKED - FORMATTING ISSUES! ğŸ¨    ${reset}"
  echo -e "${bgRed}${whiteBold}                                                      ${reset}"
  echo ""
  echo -e "${redBold}â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”${reset}"
  echo -e "${redBold}â”‚  âŒ Code formatting issues detected!                â”‚${reset}"
  echo -e "${redBold}â”‚  ğŸ“ Please fix formatting and try again             â”‚${reset}"
  echo -e "${redBold}â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜${reset}"
  echo ""
  echo -e "${yellowBold}ğŸ”§ Quick fix: npm run format && npm run lint && git add . && git commit${reset}"
  echo ""
  exit 1
fi

echo "ğŸ§¹ Linting code for quality and consistency..."
if ! npm run lint; then
  redBold='\x1b[1;31m'
  yellowBold='\x1b[1;33m'
  reset='\x1b[0m'
  bgRed='\x1b[41m'
  whiteBold='\x1b[1;37m'

  echo ""
  echo -e "${bgRed}${whiteBold}                                                      ${reset}"
  echo -e "${bgRed}${whiteBold}      ğŸ› COMMIT BLOCKED - LINTING ERRORS! ğŸ›       ${reset}"
  echo -e "${bgRed}${whiteBold}                                                      ${reset}"
  echo ""
  echo -e "${redBold}â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”${reset}"
  echo -e "${redBold}â”‚  âŒ Linting failed! Please fix the issues above     â”‚${reset}"
  echo -e "${redBold}â”‚  ğŸ’¡ Common fixes:                                   â”‚${reset}"
  echo -e "${redBold}â”‚    - Remove unused variables and imports            â”‚${reset}"
  echo -e "${redBold}â”‚    - Fix syntax errors                              â”‚${reset}"
  echo -e "${redBold}â”‚    - Follow coding standards                        â”‚${reset}"
  echo -e "${redBold}â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜${reset}"
  echo ""
  exit 1
fi

echo "ğŸ—ï¸ Running build verification..."
node .husky/build-check.cjs

echo "âœ… All pre-commit checks passed! Your code is ready to commit."
